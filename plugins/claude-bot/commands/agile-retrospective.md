---
name: agile-retrospective
description: ç”Ÿæˆè¿­ä»£å›žé¡¾æŠ¥å‘Š - æ€»ç»“ä»»åŠ¡ã€æµ‹è¯•è¦†ç›–çŽ‡ã€ç¼ºé™·ç»Ÿè®¡ã€æ”¹è¿›å»ºè®®
version: 1.0.0
---

# Agile Retrospective - è¿­ä»£å›žé¡¾

è¯·æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ç”Ÿæˆè¿­ä»£å›žé¡¾æŠ¥å‘Šï¼š

## ç¬¬ä¸€æ­¥ï¼šæ£€æŸ¥è¿­ä»£çŠ¶æ€

```bash
# è¯»å–å½“å‰è¿­ä»£
if [ ! -f "projects/active/iteration.txt" ]; then
    echo "âŒ é¡¹ç›®æœªåˆå§‹åŒ–ï¼Œè¯·å…ˆè¿è¡Œ /agile-start"
    exit 1
fi

iteration=$(cat projects/active/iteration.txt)
status_file="projects/active/iterations/${iteration}/status.json"

if [ ! -f "$status_file" ]; then
    echo "âŒ çŠ¶æ€æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¯·å…ˆè¿è¡Œ /agile-start"
    exit 1
fi
```

## ç¬¬äºŒæ­¥ï¼šæ”¶é›†è¿­ä»£æ•°æ®

```bash
# è¯»å–çŠ¶æ€æ•°æ®
total=$(jq '.progress.tasks_total' "$status_file")
completed=$(jq '.progress.tasks_completed' "$status_file")
percentage=$(jq '.progress.completion_percentage' "$status_file")
bugs=$(jq '.bugs | length' "$status_file")
blockers=$(jq '.blockers | length' "$status_file")

# è¯»å–å¼€å§‹æ—¶é—´ï¼ˆå¦‚æžœè®°å½•äº†ï¼‰
started_at=$(jq -r '.started_at // "æœªçŸ¥"' "$status_file")
```

## ç¬¬ä¸‰æ­¥ï¼šæ‰«æä»»åŠ¡æ–‡ä»¶

```bash
tasks_dir="projects/active/iterations/${iteration}/tasks"

# ç»Ÿè®¡å„çŠ¶æ€ä»»åŠ¡æ•°
completed_count=0
failed_count=0

for task_file in "$tasks_dir"/TASK-*.md "$tasks_dir"/task-*.md; do
    if [ -f "$task_file" ]; then
        status=$(grep "^status:" "$task_file" | sed 's/status: *//;s/"//g')
        case "$status" in
            "completed"|"accepted")
                completed_count=$((completed_count + 1))
                ;;
            "failed")
                failed_count=$((failed_count + 1))
                ;;
        esac
    fi
done
```

## ç¬¬å››æ­¥ï¼šç»Ÿè®¡ç¼ºé™·

```bash
bugs_dir="projects/active/iterations/${iteration}/bugs"

if [ -d "$bugs_dir" ]; then
    critical_bugs=0
    high_bugs=0
    medium_bugs=0
    low_bugs=0

    for bug_file in "$bugs_dir"/BUG-*.md "$bugs_dir"/bug-*.md; do
        if [ -f "$bug_file" ]; then
            severity=$(grep "^severity:" "$bug_file" | sed 's/severity: *//;s/"//g')
            case "$severity" in
                "critical") critical_bugs=$((critical_bugs + 1)) ;;
                "high") high_bugs=$((high_bugs + 1)) ;;
                "medium") medium_bugs=$((medium_bugs + 1)) ;;
                "low") low_bugs=$((low_bugs + 1)) ;;
            esac
        fi
    done
fi
```

## ç¬¬äº”æ­¥ï¼šç”Ÿæˆå›žé¡¾æŠ¥å‘Š

```bash
report_file="projects/active/iterations/${iteration}/retrospective.md"

cat > "$report_file" << EOF
# è¿­ä»£ ${iteration} å›žé¡¾æŠ¥å‘Š

**ç”Ÿæˆæ—¶é—´**: $(date -u +%Y-%m-%dT%H:%M:%SZ)
**è¿­ä»£å‘¨æœŸ**: ${started_at} ~ $(date -u +%Y-%m-%d)

---

## ðŸ“Š æ‰§è¡Œæ‘˜è¦

### æ€»ä½“æˆæžœ

- âœ… å®Œæˆä»»åŠ¡: **${completed}/${total}** (${percentage}%)
- ðŸ› å‘çŽ°ç¼ºé™·: **${bugs}** ä¸ª
- âš ï¸ é˜»å¡žå› ç´ : **${blockers}** ä¸ª

### è´¨é‡è¯„çº§

$(if [ "$percentage" -ge 80 ] && [ "$bugs" -eq 0 ]; then
    echo "ðŸŒŸ **ä¼˜ç§€** - æ‰€æœ‰æŒ‡æ ‡è¾¾æ ‡"
elif [ "$percentage" -ge 60 ]; then
    echo "âœ… **è‰¯å¥½** - å¤§éƒ¨åˆ†ä»»åŠ¡å®Œæˆ"
else
    echo "âš ï¸ **éœ€æ”¹è¿›** - éƒ¨åˆ†æŒ‡æ ‡æœªè¾¾æ ‡"
fi)

---

## âœ¨ å®Œæˆçš„åŠŸèƒ½

### ä»»åŠ¡å®Œæˆæƒ…å†µ

- **å·²å®Œæˆ**: ${completed_count} ä¸ª
- **å¤±è´¥**: ${failed_count} ä¸ª
- **å®ŒæˆçŽ‡**: ${percentage}%

---

## ðŸ› ç¼ºé™·ç»Ÿè®¡

### ç¼ºé™·åˆ†å¸ƒ

| ä¸¥é‡ç¨‹åº¦ | æ•°é‡ |
|---------|------|
| Critical | ${critical_bugs} |
| High | ${high_bugs} |
| Medium | ${medium_bugs} |
| Low | ${low_bugs} |
| **æ€»è®¡** | **${bugs}** |

---

## âš ï¸ é‡åˆ°çš„é˜»å¡ž

- **é˜»å¡žæ•°é‡**: ${blockers} ä¸ª

---

## ðŸ’¡ æ”¹è¿›å»ºè®®

### æµç¨‹æ”¹è¿›

1. **éœ€æ±‚åˆ†æž**
   - ç¡®ä¿ç”¨æˆ·æ•…äº‹æ¸…æ™°å®Œæ•´
   - æå‰è¯†åˆ«æ½œåœ¨é£Žé™©

2. **æŠ€æœ¯è®¾è®¡**
   - åŠ å¼ºæŠ€æœ¯è¯„å®¡
   - è€ƒè™‘å¯æ‰©å±•æ€§

3. **å¼€å‘æµç¨‹**
   - ä¸¥æ ¼éµå¾ª TDD
   - åŠæ—¶åé¦ˆé—®é¢˜

4. **æµ‹è¯•æµç¨‹**
   - æé«˜æµ‹è¯•è¦†ç›–çŽ‡
   - å¢žåŠ  E2E æµ‹è¯•

### è´¨é‡æ”¹è¿›

1. **ä»£ç è´¨é‡**
   - ä»£ç å®¡æŸ¥
   - é‡æž„ä¼˜åŒ–

2. **æ–‡æ¡£è´¨é‡**
   - æ›´æ–°æŠ€æœ¯æ–‡æ¡£
   - è¡¥å……ä½¿ç”¨ç¤ºä¾‹

---

## ðŸ“ˆ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³è¡ŒåŠ¨

1. [ ] å¤„ç†é—ç•™ç¼ºé™·
2. [ ] å‡†å¤‡ä¸‹ä¸€è¿­ä»£
3. [ ] ä¼˜åŒ–æ”¹è¿›ç‚¹

---

**æŠ¥å‘Šç”Ÿæˆ**: Agile Flow Retrospective
**è¿­ä»£çŠ¶æ€**: $(if [ "$completed" -eq "$total" ]; then echo "âœ… å®Œæˆ"; else echo "â³ è¿›è¡Œä¸­"; fi)

EOF

echo "âœ… å›žé¡¾æŠ¥å‘Šå·²ç”Ÿæˆ: $report_file"
```

## ç¬¬å…­æ­¥ï¼šè¾“å‡ºæ€»ç»“

```bash
echo ""
echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘           ðŸ“Š è¿­ä»£ ${iteration} å›žé¡¾æŠ¥å‘Š                     â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "ðŸ“ˆ æ€»ä½“æˆæžœ"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  å®Œæˆä»»åŠ¡: $completed/$total ($percentage%)"
echo "  å‘çŽ°ç¼ºé™·: $bugs ä¸ª"
echo "  é˜»å¡žå› ç´ : $blockers ä¸ª"
echo ""

if [ "$bugs" -gt 0 ]; then
    echo "ðŸ› ç¼ºé™·åˆ†å¸ƒ"
    echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
    echo "  Critical: $critical_bugs"
    echo "  High: $high_bugs"
    echo "  Medium: $medium_bugs"
    echo "  Low: $low_bugs"
    echo ""
fi

echo "ðŸ“„ å®Œæ•´æŠ¥å‘Š"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "  æ–‡ä»¶: $report_file"
echo "  æŸ¥çœ‹: cat $report_file"
echo ""
```

## ç¬¬ä¸ƒæ­¥ï¼šå‡†å¤‡ä¸‹ä¸€è¿­ä»£ï¼ˆå¯é€‰ï¼‰

```bash
# å¦‚æžœå½“å‰è¿­ä»£å®Œæˆï¼Œè¯¢é—®æ˜¯å¦åˆ›å»ºä¸‹ä¸€è¿­ä»£
if [ "$completed" -eq "$total" ] && [ "$bugs" -eq 0 ]; then
    echo "ðŸŽ‰ è¿­ä»£ ${iteration} å·²å®Œæˆï¼"
    echo ""
    echo "æ˜¯å¦å‡†å¤‡ä¸‹ä¸€è¿­ä»£ï¼Ÿ"
    echo "  å‘Šè¯‰æˆ‘'å‡†å¤‡ä¸‹ä¸€è¿­ä»£'å°†åˆ›å»ºè¿­ä»£ $((iteration + 1))"
fi
```

## è¾“å‡ºç¤ºä¾‹

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           ðŸ“Š è¿­ä»£ 1 å›žé¡¾æŠ¥å‘Š                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ðŸ“ˆ æ€»ä½“æˆæžœ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  å®Œæˆä»»åŠ¡: 10/10 (100%)
  å‘çŽ°ç¼ºé™·: 2 ä¸ª
  é˜»å¡žå› ç´ : 0 ä¸ª

ðŸ› ç¼ºé™·åˆ†å¸ƒ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Critical: 0
  High: 1
  Medium: 1
  Low: 0

ðŸ“„ å®Œæ•´æŠ¥å‘Š
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  æ–‡ä»¶: projects/active/iterations/1/retrospective.md
  æŸ¥çœ‹: cat projects/active/iterations/1/retrospective.md
```

## æŠ¥å‘Šå†…å®¹

å›žé¡¾æŠ¥å‘ŠåŒ…å«ï¼š

1. **æ‰§è¡Œæ‘˜è¦** - æ€»ä½“æˆæžœå’Œè´¨é‡è¯„çº§
2. **å®Œæˆä»»åŠ¡** - ä»»åŠ¡å®Œæˆæƒ…å†µç»Ÿè®¡
3. **ç¼ºé™·ç»Ÿè®¡** - ç¼ºé™·åˆ†å¸ƒå’Œè¯¦æƒ…
4. **é˜»å¡žå› ç´ ** - é‡åˆ°çš„é˜»å¡žåˆ—è¡¨
5. **æ”¹è¿›å»ºè®®** - æµç¨‹å’Œè´¨é‡æ”¹è¿›ç‚¹
6. **ä¸‹ä¸€æ­¥è¡ŒåŠ¨** - å¾…åŠžäº‹é¡¹æ¸…å•

## ä½¿ç”¨æ—¶æœº

- âœ… è¿­ä»£å®Œæˆæ—¶
- âœ… å®šæœŸå›žé¡¾ï¼ˆå¦‚æ¯å‘¨ï¼‰
- âœ… é¡¹ç›®é‡Œç¨‹ç¢‘

## æ³¨æ„äº‹é¡¹

1. **æ•°æ®æ¥æº**ï¼šä»Ž `status.json` å’Œä»»åŠ¡æ–‡ä»¶è¯»å–
2. **æŠ¥å‘Šä½ç½®**ï¼šä¿å­˜åœ¨ `projects/active/iterations/{n}/retrospective.md`
3. **å¯é‡å¤ç”Ÿæˆ**ï¼šéšæ—¶å¯é‡æ–°ç”Ÿæˆæœ€æ–°æŠ¥å‘Š
