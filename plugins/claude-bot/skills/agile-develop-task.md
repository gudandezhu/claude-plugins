---
name: agile-develop-task
description: TDD 开发技能：5步流程（测试检查→红→绿→重构→覆盖率≥80%）
version: 2.0.0
---

# Agile Develop Task - TDD 开发

## 任务

按照严格的 TDD 流程开发任务，确保代码质量和测试覆盖率。

---

## TDD 流程（5 步骤）

### 步骤 1：检查测试文件

确认测试文件存在。如果不存在，提示用户先创建测试文件。

### 步骤 2：运行测试（红）

运行测试，确认测试失败（Red Phase）。

根据项目类型运行：
- Node.js: `npm run test:unit`
- Python: `pytest`

### 步骤 3：编写最小代码（绿）

编写最少量的代码使测试通过（Green Phase）。

### 步骤 4：重构

优化代码结构，保持测试通过。

### 步骤 5：检查覆盖率

运行覆盖率测试，确保 ≥ 80%：
- Node.js: `npm run test:unit -- --coverage`
- Python: `pytest --cov`

---

## 输出结果

```
✅ 步骤 1 通过：测试文件存在
🔴 步骤 2：测试失败（符合预期）
🟢 步骤 3：测试通过
🔄 步骤 4：代码重构完成
📊 步骤 5：覆盖率 85% (≥ 80%) ✅

🎯 任务开发完成！
```

---

## 注意事项

1. 必须按照顺序执行每个步骤
2. 测试覆盖率必须 ≥ 80%
3. 如果测试失败，尝试诊断和修复
4. 记录所有测试结果到 ai-docs/ACCEPTANCE.md
